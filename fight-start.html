<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Combat de Canards</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #e7f5ff;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    .player {
      border: 2px solid #4dabf7;
      border-radius: 12px;
      padding: 20px;
      margin: 20px auto;
      width: 90%;
      max-width: 500px;
      background: white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    h2 {
      margin-top: 0;
    }
    .health-bar {
      height: 20px;
      background: #ccc;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 10px;
    }
    .health {
      height: 100%;
      background: #51cf66;
      transition: width 0.3s;
    }
    button {
      padding: 10px 20px;
      background: #339af0;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    button:disabled {
      background: #a5d8ff;
      cursor: not-allowed;
    }
    #countdown {
      font-size: 20px;
      margin-top: 10px;
      color: #fa5252;
    }
  </style>
</head>
<body>
  <h1>Combat DÃ©marrÃ© !</h1>

  <div class="player" id="player1">
    <h2>ðŸ¤– Bot (Joueur 1)</h2>
    <div class="health-bar"><div class="health" id="health1"></div></div>
    <p id="hp1Text">HP: 20</p>
    <button id="attack1" style="display: none;">Attaquer</button>
    <p id="countdown"></p>
  </div>

  <div class="player" id="player2">
    <h2>ðŸ§‘ Joueur 2</h2>
    <div class="health-bar"><div class="health" id="health2"></div></div>
    <p id="hp2Text">HP: 20</p>
    <button id="attack2">Attaquer</button>
  </div>

  <script>
    let hp1 = 20;
    let hp2 = 20;
    let currentPlayer = 1; // 1 = Bot, 2 = Humain

    const health1 = document.getElementById("health1");
    const health2 = document.getElementById("health2");
    const hp1Text = document.getElementById("hp1Text");
    const hp2Text = document.getElementById("hp2Text");
    const attack1 = document.getElementById("attack1");
    const attack2 = document.getElementById("attack2");
    const countdown = document.getElementById("countdown");

    function updateHealthBars() {
      health1.style.width = (hp1 / 20 * 100) + "%";
      health2.style.width = (hp2 / 20 * 100) + "%";
      hp1Text.textContent = `HP: ${hp1}`;
      hp2Text.textContent = `HP: ${hp2}`;
    }

    function checkGameOver() {
      if (hp1 <= 0) {
        alert("ðŸŽ‰ Joueur 2 gagne !");
        attack1.disabled = true;
        attack2.disabled = true;
        return true;
      } else if (hp2 <= 0) {
        alert("ðŸ¤– Le Bot gagne !");
        attack1.disabled = true;
        attack2.disabled = true;
        return true;
      }
      return false;
    }

    function nextTurn() {
      currentPlayer = currentPlayer === 1 ? 2 : 1;
      if (checkGameOver()) return;

      if (currentPlayer === 1) {
        // Tour du bot
        attack2.disabled = true;
        let seconds = 5;
        countdown.textContent = `Le bot attaque dans ${seconds}s...`;
        const interval = setInterval(() => {
          seconds--;
          if (seconds > 0) {
            countdown.textContent = `Le bot attaque dans ${seconds}s...`;
          } else {
            clearInterval(interval);
            countdown.textContent = "";
            const dmg = Math.floor(Math.random() * 4) + 1;
            hp2 = Math.max(0, hp2 - dmg);
            updateHealthBars();
            nextTurn();
          }
        }, 1000);
      } else {
        // Tour du joueur
        attack2.disabled = false;
      }
    }

    attack2.addEventListener("click", () => {
      if (currentPlayer !== 2) return;
      const dmg = Math.floor(Math.random() * 4) + 1;
      hp1 = Math.max(0, hp1 - dmg);
      updateHealthBars();
      nextTurn();
    });

    // Initialisation
    updateHealthBars();
    nextTurn(); // Commence par le bot
  </script>
</body>
</html>
